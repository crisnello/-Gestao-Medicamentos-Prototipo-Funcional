<?xml version='1.0' encoding='ISO-8859-1' ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:h="http://java.sun.com/jsf/html"
      xmlns:ui="http://java.sun.com/jsf/facelets"
      xmlns:f="http://java.sun.com/jsf/core"
      xmlns:c="http://java.sun.com/jsp/jstl/core"
      xmlns:p="http://primefaces.org/ui"
      >
    
 	<ui:composition template="/pages/pedido/template.xhtml" >
 		<ui:define name="conteudo" >
 		
 			<h:form id="form_pedido_add">
 				<p:messages id="mensagens" />
 				
 				<!-- <h:inputHidden value="#{pedidoBean.pedido.id}" /> -->

 				<table width="100%" border="0">
 				
 				 	<tr style="display:none;">
 						<td>
 						<div class="form-group">
 							<h:outputLabel value="Nome" for="nome" styleClass="ui-outputlabel"/>
 							<p:inputText value="#{pedidoBean.pedido.nome}" id="nome" size="40" maxlength="50" required="true" requiredMessage="O campo nome é obrigatório." styleClass="small "/>
 							
 							<h:outputLabel value="Cartão" for="numero_cartao" styleClass="ui-outputlabel"/>
 							<p:inputMask value="#{pedidoBean.pedido.numero_cartao}" id="numero_cartao" size="25" maxlength="25" required="true" requiredMessage="O campo Número do cartão é obrigatório." styleClass="small "/>

 							<h:outputLabel value="CPF" for="cpf"  styleClass="ui-outputlabel"/>
 							<p:inputMask value="#{pedidoBean.pedido.cpf}" id="cpf" size="15" maxlength="16" mask="999.999.999-99" required="true" requiredMessage="O campo CPF é obrigatório." styleClass="small "/>

 							<h:outputLabel value="Telefone" for="telefone" styleClass="ui-outputlabel"/>
 							<p:inputMask value="#{pedidoBean.pedido.telefone}" id="telefone" size="15" maxlength="13" mask="(99)9999-9999" required="true" requiredMessage="O campo Telefone é obrigatório." styleClass="small "/>


	 						<h:outputLabel value="Data de Nascimento" for="dataNasc" styleClass="ui-outputlabel"/>
 							<p:calendar id="dataNasc" value="#{pedidoBean.pedido.dataNasc}"  size="35" maxlength="10" pattern="dd/MM/yyyy" mask="true" styleClass="small  " required="true" requiredMessage="O campo data é obrigatório." >
	 							<f:convertDateTime />
	 						</p:calendar>

 							<h:outputLabel value="Email" for="email" styleClass="ui-outputlabel"/>
 							<p:inputText value="#{pedidoBean.pedido.email}" id="email" size="40" maxlength="30" required="true" requiredMessage="O campo email é obrigatório." validator="emailValidator" styleClass="small " >
 							</p:inputText>


	 							<h:outputLabel value="Sexo" for="sexo" styleClass="ui-outputlabel"/>
	 							<h:selectOneMenu id="sexo" value="#{pedidoBean.pedido.sexo}" styleClass=" full-width">  
						            <f:selectItem itemLabel="Feminino" itemValue="F" />
						            <f:selectItem itemLabel="Masculino" itemValue="M" />
						        </h:selectOneMenu>


 							<h:outputLabel value="CEP" for="cep" styleClass="ui-outputlabel"/>
 							<p:inputMask value="#{pedidoBean.pedido.cep}" id="cep" size="15" maxlength="10" mask="99999-999" required="true" requiredMessage="O campo CEP é obrigatório." styleClass="small  ">
 							</p:inputMask>
 							
 							<h:outputLabel value="Número" for="numero" styleClass="ui-outputlabel"/>
 							<p:inputText value="#{pedidoBean.pedido.numero}" id="numero" size="15" maxlength="8"  styleClass="small  "/>
 							<h:outputLabel value="UF" for="uf" styleClass="ui-outputlabel"/>
 							<p:inputText value="#{pedidoBean.pedido.uf}" id="uf" size="4" maxlength="2" required="true" requiredMessage="O campo UF é obrigatório." styleClass="small  "/>

 							<h:outputLabel value="Endereço" for="endereco" styleClass="ui-outputlabel"/>
 							<p:inputText value="#{pedidoBean.pedido.endereco}" id="endereco" size="40" maxlength="100" required="true" requiredMessage="O campo Endereço é obrigatório." styleClass="small  "/>

 							<h:outputLabel value="Cidade" for="cidade" styleClass="ui-outputlabel"/>
 							<p:inputText value="#{pedidoBean.pedido.cidade}" id="cidade" size="40" maxlength="70" required="true" requiredMessage="O campo Cidade é obrigatório." styleClass="small  "/>

 							<h:outputLabel value="Peso" for="peso" styleClass="ui-outputlabel"/>
 							<p:inputMask value="#{pedidoBean.pedido.peso}" id="peso" size="8" maxlength="4"  mask="999,99" required="true" requiredMessage="O campo Peso é obrigatório."  styleClass="small  "/>

 							<h:outputLabel value="Altura" for="altura" styleClass="ui-outputlabel"/>
 							<p:inputMask value="#{pedidoBean.pedido.altura}" id="altura" size="6" maxlength="6" mask="9,99" required="true" requiredMessage="O campo Altura é obrigatório." styleClass="small  "/>

 							<h:outputLabel value="Superfície corporal" for="superficie_corporal" styleClass="ui-outputlabel"/>
 							<p:inputMask value="#{pedidoBean.pedido.superficie_corporal}" id="superficie_corporal" size="40" maxlength="40" required="true" requiredMessage="O campo Superfície corporal é obrigatório." styleClass="small  "/>

 							<h:outputLabel value="Diagnóstico" for="diagnostico" styleClass="ui-outputlabel"/>
 							<p:inputMask value="#{pedidoBean.pedido.diagnostico}" id="diagnostico" size="40" maxlength="40" required="true" requiredMessage="O campo Diagnóstico é obrigatório." styleClass="small  "/>

 							<h:outputLabel value="UF Médico" for="uf_medico" styleClass="ui-outputlabel"/>
 							<p:inputText value="#{pedidoBean.pedido.uf_medico}" id="uf_medico" size="3" maxlength="2" required="true" requiredMessage="O campo UF Médico é obrigatório." styleClass="small  "/>

 							<h:outputLabel value="Médico" for="medico" styleClass="ui-outputlabel"/>
 							<p:inputMask value="#{pedidoBean.pedido.medico}" id="medico" size="40" maxlength="40" required="true" requiredMessage="O campo Médico é obrigatório." styleClass="small  "/>

 							<h:outputLabel value="CRM" for="crm_medico" styleClass="ui-outputlabel"/>
 							<p:inputMask value="#{pedidoBean.pedido.crm_medico}" id="crm_medico" size="15" maxlength="15" required="true" requiredMessage="O campo CRM do Médico é obrigatório." styleClass="small  "/>

							<h:outputLabel value="Data da receita" for="receita" styleClass="ui-outputlabel"/>
 							<p:calendar id="receita" value="#{pedidoBean.pedido.dataReceita}"  size="35" maxlength="10" pattern="dd/MM/yyyy" mask="true" styleClass="small  " required="true" requiredMessage="O campo receita é obrigatório." />
 							</div>
 						</td>
 					</tr>
 					
 				
 					<tr style="display:none;">
 						<td colspan="3">
 						<div class="form-group">
								<h:outputLabel value="Medicamentos" for="medicamentos" styleClass="ui-outputlabel"/>
								<p class="font12px text-justify">utilize Ctrl para selecionar mais de um medicamento	</p>
								<table class="bradseg-table  " width="100%" border="0" >
										    <thead class="hidden-xs">
										        <tr>
										            <th class="col-md-1 text-center"></th>
										            <th class="col-md-2 text-center">EAN</th>
										            <th class="col-md-9  text-left">Medicamento / Apresentação</th>
										            <th class="col-md-6 text-left"></th>
										        </tr>
										    </thead>
										    <tbody >
										    	<tr>
											      <td class="col-md-1 col-sm-1 col-xs-12 text-left">
													<h:selectManyListbox id="medicamentos" value="#{pedidoBean.pedido.medicamentos}" size="10" styleClass="full-width">
						 								<f:selectItems value="#{medicamentoBean.medicamentos}" var="med" itemLabel="#{med.ean} - #{med.medicamento} /  #{med.apresentacao}" itemValue="#{med.id}" ></f:selectItems>
											        </h:selectManyListbox>
											      </td>
										    </tr>
								        </tbody>
							        </table>
						        </div>
 						</td>
 					</tr>
 				
 					
<!--  					<tr>
 						<td colspan="4">
 						
 							
		 						<table class="bradseg-table  " width="100%" >
								    <thead class="hidden-xs">
								        <tr>
								            <th class="col-md-1 text-center"></th>
								            <th class="col-md-2">EAN</th>
								            <th class="col-md-7">Medicamento</th>
								            <th class="col-md-2">Apresentação</th>
								        </tr>
								    </thead>
								    <tbody height="150px">
								    	
									    <ui:repeat var="m" value="#{pedidoBean.pedido.medicamentos}" varStatus="status">
												<tr>
										            <td class="col-md-1 col-sm-1 col-xs-12 text-center">
										                <div class="bradseg-chk">
														</div>
													</td>
										            <td class="col-md-2 col-sm-2 col-xs-12">#{m.ean}</td>
										            <td class="col-md-7 col-sm-7 col-xs-12">#{m.medicamento}</td>
										            <td class="col-md-2 col-sm-2 col-xs-12">#{m.apresentacao}</td>
									        </tr>
										</ui:repeat>
								       
								    </tbody>
								</table>
							
 						</td>
 					</tr> -->
 					
 					 <tr>
 						<td colspan="4">
 						<div class="form-group">
 								<h:outputLabel value="Informe a quantidade de cada Medicamento" styleClass="ui-outputlabel"/>
 							
		 						<table class="bradseg-table  " width="100%" >
								    <thead class="hidden-xs">
								        <tr>
								            <th class="col-md-1 text-center"></th>
								            <th class="col-md-2">EAN</th>
								            <th class="col-md-7">Medicamento</th>
								            <th class="col-md-2">Apresentação</th>
								             <th class="col-md-2">Quantidade</th>
								        </tr>
								    </thead>
								    <tbody height="250px">
								    	
									    <ui:repeat var="x" value="#{pedidoBean.pedido.pedidomedicamento}" varStatus="status">
												<tr>
										            <td class="col-md-1 col-sm-1 col-xs-12 text-center">
										                <div class="bradseg-chk">
										                	<!-- #{x.id} -->
														</div>
													</td>
										            <td class="col-md-2 col-sm-2 col-xs-12">#{x.medicamento.ean}</td>
										            <td class="col-md-7 col-sm-7 col-xs-12">#{x.medicamento.medicamento}</td>
										            <td class="col-md-2 col-sm-2 col-xs-12">#{x.medicamento.apresentacao}</td>
										            <td class="col-md-2 col-sm-2 col-xs-12">

										            	<p:inputText value="#{pedidoBean.quantidade}" required="true" requiredMessage="O campo Procedimento é obrigatório."   size="5" maxlength="5"  styleClass="small  ">
														</p:inputText>

										            
										            </td>
									        </tr>
										</ui:repeat>
								       
								    </tbody>
								</table>
						</div>
							
 						</td>
 					</tr>
				
 					<tr>
	 					<td colspan="2">
	 					<div class="form-group">
	 						 <h:commandButton value="Adicionar" action="#{pedidoBean.adicionar}" ajax="false" process="form_pedido_add" update="@all" icon="ui-icon-plus" styleClass="bradseg-btn small blue"/>
	 						</div>
	 					</td>
	 				</tr>
 				</table>


    			
 			</h:form>
 		</ui:define>
  	</ui:composition>
</html>